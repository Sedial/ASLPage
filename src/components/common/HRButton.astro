---
interface Props {
  phoneNumber?: string;
  message?: string;
  position?: 'right' | 'left';
  size?: 'sm' | 'md' | 'lg';
  class?: string;
}

const {
  phoneNumber = '+573164820228',
  message = 'Hola, estoy interesado/a en las oportunidades laborales en ASL - Logística 3PL Colombia. Me gustaría conocer más sobre las vacantes disponibles en Talento Humano.',
  position = 'left',
  size = 'lg',
  class: className = '',
} = Astro.props;

const sizeClasses = {
  sm: 'w-12 h-12',
  md: 'w-14 h-14',
  lg: 'w-16 h-16'
};

const positionClasses = {
  right: 'right-4 sm:right-6',
  left: 'left-4 sm:left-6'
};

// Crear el enlace de WhatsApp para Talento Humano
const whatsappUrl = `https://wa.me/${phoneNumber.replace(/[^0-9]/g, '')}?text=${encodeURIComponent(message)}`;
---

<a
  href={whatsappUrl}
  target="_blank"
  rel="noopener noreferrer"
  aria-label="Contactar Talento Humano por WhatsApp"
  class={`fixed bottom-24 ${positionClasses[position]} ${sizeClasses[size]} rounded-full bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white shadow-2xl flex items-center justify-center transition-all duration-300 hover:scale-110 focus:outline-none focus:ring-4 focus:ring-red-300 z-50 group border-2 border-white ${className}`}
  id="hr-button"
>
  <!-- Icono de Talento Humano - Profesional y elegante -->
  <svg 
    class="w-8 h-8" 
    fill="currentColor" 
    viewBox="0 0 24 24" 
    xmlns="http://www.w3.org/2000/svg"
  >
    <path d="M20 6h-2.18c.11-.31.18-.65.18-1a2.996 2.996 0 0 0-5.5-1.65l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-2 .89-2 2v11c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm6 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm5 15H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L16.38 12 18 10.83 15.92 8H20v11z"/>
  </svg>
  
  <!-- Tooltip -->
  <div class="absolute left-full ml-3 px-4 py-3 bg-gradient-to-r from-gray-800 to-gray-900 text-white text-sm rounded-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 whitespace-nowrap shadow-xl">
    <div class="font-semibold text-red-400">Talento Humano</div>
    <div class="text-xs text-gray-300 mt-1">Únete a nuestro equipo</div>
    <div class="absolute top-1/2 -left-1 transform -translate-y-1/2 w-2 h-2 bg-gray-800 rotate-45"></div>
  </div>
  
  <!-- Efecto de pulso profesional -->
  <div class="absolute inset-0 rounded-full bg-red-400 animate-ping opacity-30"></div>
  <div class="absolute inset-0 rounded-full bg-white opacity-10"></div>
</a>

<style>
  @keyframes pulse-hr {
    0% {
      transform: scale(1);
      box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.7);
    }
    70% {
      transform: scale(1.05);
      box-shadow: 0 0 0 10px rgba(220, 38, 38, 0);
    }
    100% {
      transform: scale(1);
      box-shadow: 0 0 0 0 rgba(220, 38, 38, 0);
    }
  }
  
  #hr-button {
    animation: pulse-hr 2s infinite;
  }
  
  #hr-button:hover {
    animation: none;
  }
  
  /* Responsive adjustments */
  @media (max-width: 640px) {
    #hr-button {
      bottom: 6rem;
    }
  }
  
  /* Efecto adicional para destacar el propósito */
  #hr-button::before {
    content: '';
    position: absolute;
    top: -2px;
    left: -2px;
    right: -2px;
    bottom: -2px;
    background: linear-gradient(45deg, #dc2626, #b91c1c, #991b1b, #dc2626);
    border-radius: inherit;
    z-index: -1;
    opacity: 0;
    transition: opacity 0.3s ease;
  }
  
  #hr-button:hover::before {
    opacity: 0.3;
    animation: rotate 2s linear infinite;
  }
  
  @keyframes rotate {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const hrButton = document.getElementById('hr-button');
    
    if (hrButton) {
      // Tracking de clics para Talento Humano
      hrButton.addEventListener('click', () => {
        console.log('HR WhatsApp button clicked');
        
        // Opcional: Analytics tracking
        if (typeof gtag !== 'undefined') {
          gtag('event', 'click', {
            event_category: 'HR Contact',
            event_label: 'WhatsApp HR Button',
            value: 1
          });
        }
      });
    }
  });
</script>